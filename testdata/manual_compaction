batch
set a 1
set b 2
----

compact a-b
----
6:
  6:[a-b]

batch
set c 3
set d 4
----

compact c-d
----
6:
  6:[a-b]
  8:[c-d]

batch
set b 5
set c 6
----

compact a-d
----
6:
  11:[a-d]

# This also tests flushing a memtable that only contains range
# deletions.

batch
del-range a e
----

compact a-d
----

# Test that a multi-output-file compaction generates non-overlapping files.

define target-file-sizes=(100, 1)
L0
  a.SET.2:v
L0
  b.SET.1:v
----
0:
  6:[b-b]
  5:[a-a]

compact a-b
----
1:
  7:[a-a]
  8:[b-b]
